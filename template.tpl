___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Botup",
  "categories": ["CHAT"],
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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"
  },
  "description": "Build and manage intelligent bots to help your teams focus on what matters the most",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "api_key",
    "displayName": "ApiKey",
    "simpleValueType": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// Enter your template code here.
const log = require('logToConsole');
const encodeUriComponent = require('encodeUriComponent');
const injectScript = require('injectScript');
log('data =', data);
const api_key = encodeUriComponent(data.api_key);

const trackingUrl = 'https://gtm.500apps.com/gtm/botup/' + api_key +'.js';
injectScript(trackingUrl, data.gtmOnSuccess, data.gtmOnFailure);
data.gtmOnSuccess();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://gtm.500apps.com/gtm/*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: Test case
  code: |-
    const mockData = {
      // Mocked field values
      api_key : "MzUwNDQ1ODI2ODI0NTcyNy00NDAtZGV2"
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();


___NOTES___

Created on 29/09/2021, 17:40:21


